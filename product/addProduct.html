<!DOCTYPE HTML>
<html>
	<head>
		<title>新增样品</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link href="https://g.alicdn.com/bui/bui/1.1.21/css/bs3/dpl.css" rel="stylesheet">
  		<link href="https://g.alicdn.com/bui/bui/1.1.21/css/bs3/bui.css" rel="stylesheet">
	</head>
	<body>
		<div class="container">
			<br />
			<form id="J_Form" class="form-horizontal">
				<h2>基本信息</h2>
				<div class="row">
					<div class="control-group span12">
						<label class="control-label"><s>*</s>样品名称：</label>
						<div class="controls">
							<input name="sname" type="text" class="control-text" data-rules="{required:true}">
						</div>
					</div>
					<div class="control-group span12">
						<label class="control-label"><s>*</s>样品年份：</label>
						<div class="controls">
							<select name="years" data-rules="{required:true}">
								<option value="">请选择</option>
								<option value="0">2015</option>
								<option value="1">2016</option>
								<option value="2">2017</option>
								<option value="3">2018</option>
								<option value="4">2019</option>
								<option value="5">2020</option>
								<option value="6">2021</option>
								<option value="7">2022</option>
							</select>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="control-group span12">
						<label class="control-label">样品描述：</label>
						<div class="controls">
							<input name="pro_des" type="text" class="control-text" />
						</div>
					</div>
					<div class="control-group span12">
						<label class="control-label"><s>*</s>样品图片：</label>
						<div class="controls">
							<div id="pro_image_uploader">
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="control-group span12">
						<label class="control-label"><s>*</s>业务员：</label>
						<div class="controls">
							<select name="salesman" data-rules="{required:true}">
								<option value="">请选择</option>
								<option value="0">2015</option>
								<option value="1">2016</option>
								<option value="2">2017</option>
								<option value="3">2018</option>
								<option value="4">2019</option>
								<option value="5">2020</option>
								<option value="6">2021</option>
								<option value="7">2022</option>
							</select>
						</div>
					</div>
				</div>
				<hr/>
				<h2>费用信息</h2>
				<div class="row">
					<div class="control-group span12">
						<label class="control-label"><s>*</s>综合管理费：</label>
						<div class="controls">
							<input name="man_fee" type="text" class="control-text" data-rules="{required:true,number:true}">
						</div>
					</div>
					<div class="control-group span12">
						<label class="control-label"><s>*</s>综合材料费：</label>
						<div class="controls">
							<input name="mat_fee" type="text" class="control-text" data-rules="{required:true,number:true}">
						</div>
					</div>
				</div>
				<hr/>
				<h2>工序信息</h2>
				<div class="row">
					<div class="span21 offset3 control-row-auto">
						<div id="processGrid"></div>
						<input type="hidden" name="process">
					</div>
				</div>
				<hr/>
				<h2>备注</h2>
				<div class="row">
					<div class="control-group span24">
						<label class="control-label">备注信息：</label>
						<div class="controls control-row4">
							<textarea name="" id="" class="span8 span-width"></textarea>
						</div>
					</div>
				</div>
				<hr />
				<div class="row">
					<div class="form-actions offset3">
						<button type="submit" class="button button-primary">保存</button>
						<button type="reset" class="button">重置</button>
					</div>
				</div>
			</form>
			<br /><br />
			<div id="content" class="hide">
				<form id="J_Form" class="form-vertical">
					<div class="row">
						<div class="control-group span8">
							<label class="control-label"><s>*</s>一级工序：</label>
							<div class="controls">
								<select data-rules="{required:true}" name="p1" class="input-normal">
									<option value="">请选择</option>
									<option value="草帽">草帽</option>
									<option value="鸭舌帽">鸭舌帽</option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="control-group span8">
							<label class="control-label"><s>*</s>二级工序：</label>
							<div class="controls">
								<select data-rules="{required:true}" name="p2" class="input-normal">
									<option value="">请选择</option>
									<option value="草帽">草帽</option>
									<option value="鸭舌帽">鸭舌帽</option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="control-group span8">
							<label class="control-label"><s>*</s>档次：</label>
							<div class="controls">
								<select data-rules="{required:true}" name="p3" class="input-normal">
									<option value="">请选择</option>
									<option value="草帽">草帽</option>
									<option value="鸭舌帽">鸭舌帽</option>
								</select>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<script type="text/javascript" src="../assets/js/jquery-1.8.1.min.js"></script>
		<script type="text/javascript" src="../assets/js/bui-min.js"></script>
		<!--<script type="text/javascript" src="../assets/js/config-min.js"></script>-->
  		<script src="http://g.alicdn.com/bui/seajs/2.3.0/sea.js"></script>
  		<script src="http://g.alicdn.com/bui/bui/1.1.21/config.js"></script>
		<script type="text/javascript">
			BUI.use('common/page');
			BUI.use('bui/uploader', function(Uploader) {
				var uploader = new Uploader.Uploader({
					render : '#pro_image_uploader',
					url : ''
				}).render();
			});

			BUI.use(['bui/grid', 'bui/data', 'bui/form'], function(Grid, Data, Form) {
				var columns = [{
							title: '一级工序',
							dataIndex: 'p1'
						},
						{
							title: '二级工序',
							dataIndex: 'p2'
						},
						{
							title: '档次',
							dataIndex: 'p3'
						},
						{
							title: '操作',
							renderer: function() {
								return '<span class="grid-command btn-edit">编辑</span>';
							}
						}
					],
					//默认的数据
					data = [],
					store = new Data.Store({
						data: data
					}),
					editing = new Grid.Plugins.DialogEditing({
						contentId: 'content',
						triggerCls: 'btn-edit',
						eidtor: {
							focusable: false
						}
					}),
					grid = new Grid.Grid({
						render: '#processGrid',
						columns: columns,
						width: 700,
						forceFit: true,
						store: store,
						plugins: [Grid.Plugins.CheckSelection, editing],
						tbar: {
							items: [{
									btnCls: 'button button-small',
									text: '<i class="icon-plus"></i>添加',
									listeners: {
										'click': addFunction
									}
								},
								{
									btnCls: 'button button-small',
									text: '<i class="icon-remove"></i>删除',
									listeners: {
										'click': delFunction
									}
								}
							]
						}

					});
				grid.render();

				function addFunction() {
					var newData = {};
					store.add(newData);
					editing.edit(newData); //添加记录后，直接编辑
				}

				function delFunction() {
					var selections = grid.getSelection();
					store.remove(selections);
				}

				var form = new Form.HForm({
					srcNode: '#J_Form'
				});
				form.render();

				form.on('beforesubmit', function() {
					if(!editing.isValid()) {
						return false;
					}
				});
			});
		</script>

		<body>

</html>